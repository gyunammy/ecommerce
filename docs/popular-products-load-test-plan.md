# 인기 상품 조회 부하 테스트 계획서

## Quick Start

```bash
docker-compose --profile k6-popular up
```

## 1. 테스트 대상

- **API**: `GET /products/top?sortType=VIEW_COUNT`
- **기능**: 조회수 기준 인기 상품 조회
- **정렬**: `ORDER BY viewCount DESC`

## 2. 테스트 목적

- 단계적 부하 증가 시 정렬 쿼리의 응답 시간 변화 확인
- 최대 200명의 동시 사용자 환경에서 시스템 안정성 검증
- 응답 시간(95% < 1초) 목표 달성 여부 확인

## 3. 테스트 시나리오

### 단계적 부하 테스트

```
사전 조건:
- Spring Boot 애플리케이션이 정상 실행 중
- 상품 데이터가 DB에 존재 (100개 이상 권장)
- GET /products/top?sortType=VIEW_COUNT API가 정상 응답

테스트 흐름:
1단계 (0-20초): 부하 증가
  - VUs: 0 → 100명으로 증가
  - 목적: 정렬 쿼리가 점진적 부하 증가를 안정적으로 처리하는지 확인

2단계 (20-40초): 스파이크 부하
  - VUs: 100 → 200명으로 급증
  - 목적: 갑작스런 트래픽 증가 시 정렬 쿼리 성능 확인

3단계 (40-60초): 부하 감소
  - VUs: 200 → 0명으로 감소
  - 목적: 부하 감소 시 시스템 복구 속도 확인

총 테스트 시간: 60초 (1분)
각 VU는 1-3초 간격으로 반복 요청 (실제 사용자 행동 시뮬레이션)
```

## 4. 결과 확인

### 📊 Grafana 대시보드 (권장)

브라우저에서 실시간 그래프로 확인:
```
http://localhost:3000
```

**제공되는 메트릭:**
- 📈 초당 요청 수 (RPS/TPS)
- ⏱️ 응답 시간 분포 (p50, p95, p99)
- ❌ HTTP 에러율
- 🔄 동시 접속자 수 (VUs)